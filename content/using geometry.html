<!DOCTYPE html><html>
        <head>
        <title>CMSiMDE</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link href="https://fonts.googleapis.com/css?family=Quicksand:300,400,500,700,900" rel="stylesheet">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/fonts/icomoon/style.css">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/css/bootstrap.min.css">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/css/magnific-popup.css">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/css/jquery-ui.css">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/css/owl.carousel.min.css">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/css/owl.theme.default.min.css">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/css/bootstrap-datepicker.css">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/fonts/flaticon/font/flaticon.css">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/css/aos.css">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/css/style.css">
        <link rel="shortcut icon" href="./../cmsimde/static/favicons.png">
        
        <style type='text/css'>
            .site-section {
            background-color: #FFFF;
            padding: 40px 40px;
            }
            body > div > div.dropdown.open {
                display: block;
            }
        </style>
    
        <!-- <script src="./../cmsimde/static/jquery.js"></script> -->
        <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> -->
        <script src="../cmsimde/static/chimper/js/jquery-3.3.1.min.js"></script>
        <link rel="stylesheet" href="./../cmsimde/static/tipuesearch/css/normalize.min.css">
        <script src="./../cmsimde/static/tipuesearch/tipuesearch_set.js"></script>
        <script src="tipuesearch_content.js"></script>
        <link rel="stylesheet" href="./../cmsimde/static/tipuesearch/css/tipuesearch.css">
        <script src="./../cmsimde/static/tipuesearch/tipuesearch.js"></script>
        <script>
            /* original tipuesearch
            $(document).ready(function() {
                 $('#tipue_search_input').tipuesearch();
            });
            */
            // customed doSearch
            function doSearch() {
                $('#tipue_search_input').tipuesearch({
                    newWindow: true, 
                    minimumLength: 2,
                    wholeWords: false, // for search 中文
                });
            }
            $(document).ready(doSearch);
        </script>
        
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shCore.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushBash.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushDiff.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushJScript.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushJava.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushPython.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushSql.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushHaxe.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushXml.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushPhp.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushLua.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushCpp.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushCss.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushCSharp.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushDart.js"></script>
<link type="text/css" rel="stylesheet" href="./../cmsimde/static/syntaxhighlighter/css/shCoreDefault.css"/>
<script type="text/javascript">SyntaxHighlighter.all();</script>
<!-- 暫時不用
<script src="./../cmsimde/static/fengari-web.js"></script>
<script type="text/javascript" src="./../cmsimde/static/Cango-13v08-min.js"></script>
<script type="text/javascript" src="./../cmsimde/static/CangoAxes-4v01-min.js"></script>
<script type="text/javascript" src="./../cmsimde/static/gearUtils-05.js"></script>
-->
<!-- for Brython 暫時不用
<script src="https://scrum-3.github.io/web/brython/brython.js"></script>
<script src="https://scrum-3.github.io/web/brython/brython_stdlib.js"></script>
-->
<style>
img.add_border {
    border: 3px solid blue;
}
</style>

</head>
<body>
<div class='container'><nav>
        
    <div class="site-wrap">

    <div class="site-mobile-menu">
      <div class="site-mobile-menu-header">
        <div class="site-mobile-menu-close mt-3">
          <span class="icon-close2 js-menu-toggle"></span>
        </div>
      </div>
      <div class="site-mobile-menu-body"></div>
    </div>
    
            <header class="site-navbar py-4 bg-white" role="banner">
              <div class="container-fluid">
                <div class="row align-items-center">
                <h1>40823110協同產品設計</h1>
                <div class="pl-4">
                    <form>
                    <input type="text" placeholder="Search" name="q" id="tipue_search_input" pattern=".{2,}" title="At least 2 characters" required>
                    </form>
                </div>
                  <!-- <div class="col-11 col-xl-2">
                    <h1 class="mb-0 site-logo"><a href="index.html" class="text-black h2 mb-0">40823110協同產品設計</a></h1> 
                  </div>
                  -->
                  <div class="col-12 col-md-10 d-none d-xl-block">
                    <nav class="site-navigation position-relative text-right" role="navigation">
    <ul class='site-menu js-clone-nav mr-auto d-none d-lg-block'>
                        <li class="active has-children"><a href="index.html">Home</a>
                        <ul class="dropdown">
                            <li><a href="sitemap.html">Site Map</a></li>
                            <li><a href="./../reveal/index.html">reveal</a></li>
                            <li><a href="./../blog/index.html">blog</a></li>
                        </ul>
                      </li>
                     <li><a href='about.html'>about</a><li class='has-children'><a href='每周學習進度.html'>每周學習進度</a><ul class='dropdown'><li><a href='W3進度.html'>W3進度</a><li class='has-children'><a href='W4進度.html'>W4進度</a><ul class='dropdown'><li><a href='ssh.html'>ssh</a><li><a href='更新cmsimde.html'>更新cmsimde</a></li></ul><li class='has-children'><a href='w5.html'>w5</a><ul class='dropdown'><li><a href='產品目標.html'>產品目標</a><li><a href='工作分配.html'>工作分配</a></li></ul><li class='has-children'><a href='w6.html'>w6</a><ul class='dropdown'><li><a href='Lua資料.html'>Lua資料</a></li></ul><li class='has-children'><a href='w7.html'>w7</a><ul class='dropdown'><li><a href='keyboard control.html'>keyboard control</a></li></ul><li class='has-children'><a href='w8.html'>w8</a><ul class='dropdown'><li><a href='basketball Machine 2.4.3.html'>basketball Machine 2.4.3</a></li></ul><li class='has-children'><a href='W11進度.html'>W11進度</a><ul class='dropdown'><li><a href='task1.html'>task1</a><li><a href='task1-program.html'>task1-program</a></li></ul><li class='has-children'><a href='w14.html'>w14</a><ul class='dropdown'><li><a href='robotdk影片.html'>robotdk影片</a><li><a href='what is xml.html'>what is xml</a></li></ul><li class='has-children'><a href='w15.html'>w15</a><ul class='dropdown'><li><a href='using algebra.html'>using algebra</a><li><a href='using geometry.html'>using geometry</a></li></ul><li class='has-children'><a href='w16.html'>w16</a><ul class='dropdown'><li><a href='oneshape繪圖.html'>oneshape繪圖</a><li><a href='coppeliasim場景.html'>coppeliasim場景</a><li><a href='手臂末端加入 components-gripper-suction pad 吸盤跟鍵盤控制.html'>手臂末端加入 components-gripper-suction pad 吸盤跟鍵盤控制</a><li><a href='MTB_robot add IK.html'>MTB_robot add IK</a><li><a href='MTB_robo use require.html'>MTB_robo use require</a><li><a href='remote api.html'>remote api</a></li></ul><li><a href='w17小組task.html'>w17小組task</a><li><a href='w18期末報告.html'>w18期末報告</a></li></ul><li><a href='bug.html'>bug</a></li>
                      </ul>
                </nav>
              </div>
              <div class="d-inline-block d-xl-none ml-md-0 mr-auto py-3" style="position: relative; top: 3px;"><a href="#" class="site-menu-toggle js-menu-toggle text-black"><span class="icon-menu h3"></span></a></div>
              </div>

            </div>
          </div>
          
        </header>
    <div id="tipue_search_content">using algebra << <a href='using algebra.html'>Previous</a> <a href='w16.html'>Next</a> >> w16<br /><h1>using geometry</h1>
<p>We saw this simple two-link robot in the previous lecture about forward kinematics.</p>
<p>我們在上一堂關於正向運動學的講座中看到了這個簡單的二連桿機構。</p>
<p> </p>
<p>The tooltip pose of this robot is described simply by two numbers, the coordinates x and y with respect to the world coordinate frame.</p>
<p>該機構的工具提示姿態由兩個數字簡單描述，相對於世界的坐標系的坐標的X和Y。</p>
<p><span> </span></p>
<p>So, the problem here is that given x and y, we want to determine the joined angles, q1 and q2.</p>
<p>所以，這個問題在這裡是給定<span>x</span>跟<span>y</span>，我們想要求出這個節點的角度<span>q1</span>跟<span>q2</span>。</p>
<p><span> </span></p>
<p>The solution that we’re going to follow in this particular section is a geometric one.</p>
<p>這節我們將遵循這個特別的幾何方法來解決。</p>
<p><span> </span></p>
<p>We’re going to start with a simple piece of construction.</p>
<p>我們將從一個簡單的結構開始。</p>
<p> </p>
<p>We’re going to overlay the red triangle on top of our robot.</p>
<p>我們將一個紅色的三角形覆蓋在機構上。</p>
<p> </p>
<p>We know that the end point coordinate is x, y, so the vertical height of the triangle is y, the horizontal width is x.</p>
<p>我們知道結束的點坐標是x跟y，所以三角形的垂直距離是y，水平距離是x。</p>
<p> </p>
<p>And, using Pythagoras theorem, we can write r squared equals x squared plus y squared.</p>
<p>然後，利用畢氏定理，我們可以寫出 r<sup>2<span> </span></sup>= x<sup>2</sup><span> </span>+y<sup>2</sup>。</p>
<p> </p>
<p>So far, so easy.</p>
<p>到這裡很容易。</p>
<p> </p>
<p>Now, we’re going to look at this triangle highlighted here in red and we want to determine the angle alpha.</p>
<p>現在，我們開始看到這個以紅色突出顯示的三角形然後我們想確定α角。</p>
<p> </p>
<p>In order to do that, we need to use the cosine rule.</p>
<p>為了做到這點，我們需要用到餘弦定理。</p>
<p> </p>
<p>And, if you’re a little rusty on the cosine rule, here is a bit of a refresher.</p>
<p>如果你對餘弦定理有點生疏，這裡有一點複習。</p>
<p> </p>
<p>We have an arbitrary triangle.</p>
<p>我們有任意一個三角形。</p>
<p> </p>
<p>We don’t have any right angles in it and we’re going to label the length of this edge as A and the angle opposite that edge, we’re going to label as little a.</p>
<p>我們沒有任何直角，我們將這條邊的長度標記為 A，而與該邊相對的角度，我們將標記為小 a。</p>
<p> </p>
<p>And, we do the same for this edge and this angle, and this edge and this angle.</p>
<p>並且，我們對這條邊和這個角，以及這條邊和這個角做同樣的事情。</p>
<p> </p>
<p>So, all together, the sides are labelled capitals A, B and C, and the angles are labelled little a, little b, and little c.</p>
<p>因此，所有邊都標記為A、B、C，角標記為a、b、c。</p>
<p> </p>
<p>So, the cosine rule is simply this relationship here.</p>
<p>餘弦定理就是這種關係。</p>
<p> </p>
<p>It’s a bit like Pythagoras’ theorem except for this extra term on the end with the cos a in it.</p>
<p>它有點像畢達哥拉斯的定理，除了末尾有cos a以外。</p>
<p> </p>
<p>Now, let’s apply the cosine rule to the particular triangle we looked at a moment ago.</p>
<p>現在，讓我們將餘弦定理用於我們剛才所看到的三角形。</p>
<p> </p>
<p>It’s pretty straightforward to write down this particular relationship.</p>
<p>寫下這種特殊關係非常簡單。</p>
<p> </p>
<p>We can isolate the term cos alpha which gives us the angle alpha that we’re interested in.</p>
<p>我們可以分離出cosα，它給出了我們需要的角度α。</p>
<p> </p>
<p>And, it’s defined in terms of the constant link lengths, A1 and A2 and the position of the end effector, x and y.</p>
<p>而且，他是根據連桿長度A1跟A2以及末端執行器位置x、y來定義的。</p>
<p> </p>
<p>We can write this simple relationship between the angles alpha and q2.</p>
<p>我們可以寫出簡單的關係在角度α跟q2之間。</p>
<p> </p>
<p>And, we know from the shape of the cosine function that cos of q2 must be equal to negative of cos alpha.</p>
<p>而且，我們從餘弦函數的形狀知道，cosq2必須等於-cosα。</p>
<p> </p>
<p>This time, let’s just write an expression for the cosine of the joined angle q2.</p>
<p>這一次，讓我們為節點角q2的餘弦函數寫一個表示式。</p>
<p> </p>
<p>Now, we’re going to draw yet another red triangle and we’re going apply some simple trigonometry here.</p>
<p>現在，讓我們畫一個另外的三角形然後利用簡單的三角函數。</p>
<p> </p>
<p>If we know q2, then we know this length and this length of the red triangle.</p>
<p>如果我們知道q2，甚至我們知道這個長度和這個紅色三角形的長度。</p>
<p> </p>
<p>We can write this relationship for the sine of the joined angle q2.</p>
<p>我們可以寫出節點角q2的正弦關係。</p>
<p> </p>
<p>Now, we can consider this bigger triangle whose angle is beta and this side length of this triangle is given here in blue.</p>
<p>現在，我們可以知道這個大的三角形，角度是β，然後由藍色表示此三角形的邊。</p>
<p> </p>
<p>And, the length of the other side of the triangle is this.</p>
<p>且三角形另一邊長度是這個。</p>
<p> </p>
<p>So, now we can write an expression for the angle beta in terms of these parameters here</p>
<p>所以，現在我們可以根據這些參數寫出角度β的表達式。</p>
<p> </p>
<p>Going back to the red triangle that we drew earlier, we can establish a relationship between q1 and the angle beta.</p>
<p>回到我們之前畫的紅色三角形，我們可以建立q1和角度β之間的關係。</p>
<p> </p>
<p>Introduce yet another angle, this one gamma and we can write a relationship between the angle gamma and the tooltip coordinates x and y.</p>
<p>引入另一個角度，γ，我們可以寫出角度γ和工具提示坐標x、y之間的關係。</p>
<p> </p>
<p>Now, we can write a simple relationship between the angles that we’ve constructed, gamma and beta and the joined angle we’re interested in which is q</p>
<p>現在，可以寫出我們建構的角度γ和β與我們感興趣的節點角q之間的簡單關係。</p>
<p> </p>
<p>And, the total relationship looks something like this.</p>
<p>而且，整個關係看起來像這樣。</p>
<p> </p>
<p>Quite a complex relationship, it gives us the angle of joined one, that’s q1 in terms of the end effector coordinates y and x, and a bunch of constants, a1 and a2, and it’s also a function of the second joint angle, q2.</p>
<p>相當複雜的關係，它為我們提供了連接的角度，即末端執行器坐標q1的y和x，以及一系列常數a1和a2，它也是第二個節點角q2的函數。</p>
<p> </p>
<p>So, let’s summarize what it is that we have derived here.</p>
<p>所以，讓我們總結一下我們在這裡得出的結論。</p>
<p> </p>
<p>We have an expression for the cosine of q2 and we have an expression for q1.</p>
<p>我們有cosq2以及q1的表達式。</p>
<p> </p>
<p>Now, the cosine function is symmetrical about 0.</p>
<p>現在，餘弦函數在0對稱。</p>
<p> </p>
<p>So, if we know the value of the cosine of q2, then there are two possible solutions a positive angle and a negative angle.</p>
<p>所以，如果我們知道cosq2的值可能有兩種解，正角或負角。</p>
<p> </p>
<p>We’re going to explicitly choose the positive angle. Which means that I can write this expression here.</p>
<p>我們將明確選擇正角。這意味著我可以在這裡寫這個表達式。</p>
<p> </p>
<p>And now, we have what we call the inverse kinematic solution for this two-link robot.</p>
<p>現在，我們有了這個二連桿機構的逆向運動學解決方法。</p>
<p> </p>
<p>We have an expression for the two joined angles, q1 and q2 in terms of the end effector pose x and y, and a bunch of constants.</p>
<p>我們有兩個節點角q1和q2的表達式，根據末端執行器姿勢x和y以及一系列常數。</p>
<p> </p>
<p>You notice that the two equations are not independent. The equation for q1, in fact, depends on the solution for q2.</p>
<p>你注意到這兩個方程式不是獨立的事實上，q1 的方程取決於 q2 的解。</p>
<p> </p>
<p>In this case, q2 is negative and we’re going to write the solution for q2 with a negative sign in front of the inverse cosine.</p>
<p>在這種情況下，q2是負數，我們將用負號在cos<sup>-1</sup>前寫出q2的解。</p>
<p> </p>
<p>Now, we need to solve for q1, so we’re going to introduce this particular red triangle, the angle beta that we solved previously, and the angle gamma which is defined in terms of y and x.</p>
<p>現在，我們需要求解q1，因此我們將利用這個紅色三角形，我們之前求解的角度β以及根據y、x定義的角度γ。</p>
<p> </p>
<p>Now, we write a slightly different relationship between q1, gamma and beta, different to what we had before. There’s a change of sign involved.</p>
<p>現在，我們在q1、γ和β之間寫出略有不同的關係，與我們之前的關係不同。 涉及到符號的變化。</p>
<p> </p>
<p>Then, we can substitute all that previous equation and come up with this expression for q1.</p>
<p>然後，我們可以替換之前的所有等式，並得出q1的這個表達式。</p>
<p> </p>
<p>Again, there is a change of sign here. Previously, this was a negative sign.</p>
<p>同樣，這裡的符號發生了變化。 以前，這是一個負號。</p>
<p> </p>
<p>And, here in summary form is the solution for the inverse kinematics of our two-link robot when it is in this particular configuration, where q2 is negative.</p>
<p>並且，這裡是我們的二連桿機構在這種特定配置下的逆向運動學總結形式，其中q2為負。</p>
<p> </p>
<p>Let’s compare the two solutions, the case where q2 is positive and the case where q2 is negative.</p>
<p>讓我們比較兩個解決方案，q2為正的情況和q2為負的情況。</p>
<p>結論 : 可以利用最終位置的 x、y 來計算機構的轉角 q1、q2</p>
<p>q1 =  <span>tan<sup>-1<span> </span></sup>(y/x) - tan<sup>-1<span> </span></sup>(a2 sinq2/a1+a2 cosq2)</span></p>
<p><span>q2 =  </span><span>cos<sup>-1</sup><span> </span>(x<sup>2</sup>+y<sup>2</sup>-a1<sup>2</sup>-a2<sup>2</sup>/2a1a2)</span></p>
<br />using algebra << <a href='using algebra.html'>Previous</a> <a href='w16.html'>Next</a> >> w16</div>
        
    <!-- footer -->
      <div class="container">
        <div class="row pt-3 mx-auto">
            <p>
            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="icon-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank" >Colorlib</a>
            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            </p>
        </div>
      </div>
    <!-- for footer -->
    
        </div> <!-- for site wrap -->
            <!-- <script src="../cmsimde/static/chimper/js/jquery-3.3.1.min.js"></script> -->
            <script src="../cmsimde/static/chimper/js/jquery-migrate-3.0.1.min.js"></script>
            <script src="../cmsimde/static/chimper/js/jquery-ui.js"></script>
            <script src="../cmsimde/static/chimper/js/popper.min.js"></script>
            <script src="../cmsimde/static/chimper/js/bootstrap.min.js"></script>
            <script src="../cmsimde/static/chimper/js/owl.carousel.min.js"></script>
            <script src="../cmsimde/static/chimper/js/jquery.stellar.min.js"></script>
            <script src="../cmsimde/static/chimper/js/jquery.countdown.min.js"></script>
            <script src="../cmsimde/static/chimper/js/jquery.magnific-popup.min.js"></script>
            <script src="../cmsimde/static/chimper/js/bootstrap-datepicker.min.js"></script>
            <script src="../cmsimde/static/chimper/js/aos.js"></script>
            <!--
            <script src="../cmsimde/static/chimper/js/typed.js"></script>
                    <script>
                    var typed = new Typed('.typed-words', {
                    strings: ["Web Apps"," WordPress"," Mobile Apps"],
                    typeSpeed: 80,
                    backSpeed: 80,
                    backDelay: 4000,
                    startDelay: 1000,
                    loop: true,
                    showCursor: true
                    });
                    </script>
            -->
            <script src="../cmsimde/static/chimper/js/main.js"></script>
        
<!-- 啟用 LaTeX equations 編輯 -->
  <!-- <script>
  MathJax = {
    tex: {inlineMath: [['$', '$'], ['\(', '\)']]}
  };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>-->
    </body></html>
        